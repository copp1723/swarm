# SWARM Multi-Agent System Environment Configuration
# Copy this file to .env and fill in your actual values

# ========================================
# API CONFIGURATION
# ========================================

# OpenRouter API Configuration
OPENROUTER_API_KEY=your_openrouter_api_key_here

# SWARM API Configuration
SWARM_API_KEY=sk-dev-your-secure-api-key-here
SWARM_BASE_URL=http://localhost:5006

# GitHub Integration (Optional)
GITHUB_PAT=your_github_personal_access_token_here

# Supermemory Integration
SUPERMEMORY_BASE_URL=https://api.supermemory.ai/v3
SUPERMEMORY_API_KEY=your_supermemory_api_key_here

# ========================================
# DATABASE & CACHE CONFIGURATION
# ========================================

# Database Configuration
DATABASE_URL=sqlite:///instance/mcp_executive.db
# For PostgreSQL: postgresql://user:password@localhost/dbname
# For production: postgresql://user:password@hostname:5432/dbname?sslmode=require

# Redis Configuration (for Celery and Rate Limiting)
REDIS_URL=redis://localhost:6379/0
# For production: redis://username:password@hostname:6379/0

# Connection Pool Settings
DB_POOL_SIZE=10
DB_POOL_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ========================================
# SECURITY CONFIGURATION
# ========================================

# Core Security Keys (REQUIRED - Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
SECRET_KEY=your-secret-key-here-generate-with-secrets-token-urlsafe
JWT_SECRET_KEY=your-jwt-secret-key-here-different-from-flask-secret
FLASK_SECRET_KEY=your-flask-secret-key-here-different-from-jwt

# API Key Management
SWARM_DEV_API_KEY=sk-dev-auto-generated-in-debug-mode
API_KEY_ROTATION_DAYS=90

# Security Headers Configuration
ENABLE_SECURITY_HEADERS=true
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=false
DISABLE_CSP=false

# Content Security Policy Environment
CSP_ENVIRONMENT=production  # development, production
CSP_NONCE_ENABLED=true

# ========================================
# RATE LIMITING & SECURITY POLICIES
# ========================================

# Global Rate Limits
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis  # memory, redis

# Per-endpoint Rate Limits
RATE_LIMIT_AUTHENTICATION_PER_MINUTE=5
RATE_LIMIT_AUTHENTICATION_PER_HOUR=20
RATE_LIMIT_API_STANDARD_PER_MINUTE=60
RATE_LIMIT_API_STANDARD_PER_HOUR=1000
RATE_LIMIT_API_INTENSIVE_PER_MINUTE=10
RATE_LIMIT_API_INTENSIVE_PER_HOUR=100
RATE_LIMIT_FILE_UPLOAD_PER_MINUTE=5
RATE_LIMIT_FILE_UPLOAD_PER_HOUR=50
RATE_LIMIT_WEBHOOKS_PER_MINUTE=100
RATE_LIMIT_WEBHOOKS_PER_HOUR=2000
RATE_LIMIT_MONITORING_PER_MINUTE=300
RATE_LIMIT_MONITORING_PER_HOUR=5000
RATE_LIMIT_PUBLIC_PER_MINUTE=30
RATE_LIMIT_PUBLIC_PER_HOUR=300

# IP-based Rate Limits
RATE_LIMIT_IP_DEFAULT_PER_MINUTE=30
RATE_LIMIT_IP_DEFAULT_PER_HOUR=300
RATE_LIMIT_IP_TRUSTED_PER_MINUTE=120
RATE_LIMIT_IP_TRUSTED_PER_HOUR=2000
RATE_LIMIT_IP_SUSPICIOUS_PER_MINUTE=5
RATE_LIMIT_IP_SUSPICIOUS_PER_HOUR=20

# Legacy Rate Limits (for backward compatibility)
RATE_LIMIT_TASKS_PER_MINUTE=50
RATE_LIMIT_SEARCHES_PER_MINUTE=30

# ========================================
# EMAIL SERVICE CONFIGURATION
# ========================================

# Mailgun Configuration
MAILGUN_API_KEY=your_mailgun_api_key_here
MAILGUN_DOMAIN=your_mailgun_domain_here
MAILGUN_SIGNING_KEY=your_mailgun_webhook_signing_key_here
MAILGUN_FROM_EMAIL=noreply@your_domain.com

# Email Security
EMAIL_TLS_ENABLED=true
EMAIL_SSL_ENABLED=false

# ========================================
# FLASK & APPLICATION CONFIGURATION
# ========================================

# Flask Configuration
FLASK_ENV=development  # development, production, staging
FLASK_DEBUG=0  # Never set to 1 in production
FLASK_HOST=0.0.0.0
FLASK_PORT=5006

# Worker Configuration
WORKER_PROCESSES=2
WORKER_THREADS=4
WORKER_TIMEOUT=30

# ========================================
# LOGGING & MONITORING
# ========================================

# Logging Configuration
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=logs/mcp_executive.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5
LOG_FORMAT=json  # text, json

# Structured Logging
ENABLE_STRUCTURED_LOGGING=true
LOG_CONTEXT_FIELDS=user_id,session_id,request_id,agent_id

# External Monitoring
SENTRY_DSN=your_sentry_dsn_here_optional
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_RETRIES=3

# ========================================
# MCP & FILESYSTEM CONFIGURATION
# ========================================

# MCP Filesystem Configuration
MCP_FILESYSTEM_ALLOWED_DIRS=/Users/copp1723/Desktop
MCP_FILESYSTEM_ALLOW_WRITE=true
MCP_FILESYSTEM_ALLOW_DELETE=false
MCP_FILESYSTEM_MAX_FILE_SIZE=52428800  # 50MB
MCP_FILESYSTEM_ALLOWED_EXTENSIONS=txt,py,js,html,css,json,md,yaml,yml,xml,csv

# MCP Server Configuration
DISABLE_MCP_FILESYSTEM=false
MCP_TIMEOUT=30
MCP_MAX_RETRIES=3

# ========================================
# FEATURE FLAGS
# ========================================

# Core Features
ENABLE_AUTO_DISPATCH=true
ENABLE_REALTIME_UPDATES=true
ENABLE_AUDIT_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_MEMORY_OPTIMIZATION=true

# Security Features
ENABLE_RATE_LIMITING=true
ENABLE_IP_WHITELISTING=false
ENABLE_REQUEST_SIGNING=false
ENABLE_API_KEY_ROTATION=true

# Advanced Features
ENABLE_ADAPTIVE_RATE_LIMITING=false
ENABLE_CIRCUIT_BREAKERS=true
ENABLE_DISTRIBUTED_TRACING=false
ENABLE_METRICS_COLLECTION=true

# Agent Features
ENABLE_AGENT_ISOLATION=true
ENABLE_AGENT_PERSISTENCE=true
ENABLE_AGENT_WORKFLOWS=true

# UI Features
ENABLE_WEBSOCKET_COMPRESSION=true
ENABLE_VIRTUAL_SCROLLING=true
ENABLE_REAL_TIME_NOTIFICATIONS=true

# ========================================
# PERFORMANCE & OPTIMIZATION
# ========================================

# Request Handling
REQUEST_TIMEOUT=30
WEBHOOK_PROCESSING_TIMEOUT=30
TASK_DISPATCH_TIMEOUT=60
MAX_CONTENT_LENGTH=52428800  # 50MB

# Memory Management
MEMORY_LIMIT_MB=512
MEMORY_WARNING_THRESHOLD=80
MEMORY_CLEANUP_INTERVAL=300

# Caching
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_KEY_PREFIX=swarm:

# Connection Timeouts
DATABASE_TIMEOUT=30
REDIS_TIMEOUT=5
HTTP_CLIENT_TIMEOUT=30

# ========================================
# CELERY CONFIGURATION
# ========================================

# Celery Worker Settings
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_WORKER_TIMEOUT=300
CELERY_TASK_TIMEOUT=120

# Celery Queue Settings
CELERY_DEFAULT_QUEUE=default
CELERY_HIGH_PRIORITY_QUEUE=high_priority
CELERY_LOW_PRIORITY_QUEUE=low_priority

# ========================================
# DEVELOPMENT SETTINGS
# ========================================

# Development Tools
ENABLE_DEBUG_TOOLBAR=false
ENABLE_PROFILING=false
ENABLE_SQL_LOGGING=false

# Testing
TEST_DATABASE_URL=sqlite:///test.db
TEST_REDIS_URL=redis://localhost:6379/1

# Hot Reload
ENABLE_HOT_RELOAD=true
WATCH_PATTERNS=*.py,*.html,*.js,*.css

# ========================================
# PRODUCTION-SPECIFIC SETTINGS
# ========================================

# Production Security
FORCE_HTTPS=false
SECURE_COOKIES=false
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# Production Performance
ENABLE_GZIP=true
ENABLE_ETAG=true
STATIC_FILE_CACHE_TIMEOUT=31536000  # 1 year

# Production Monitoring
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_PATH=/api/monitoring/health
READINESS_CHECK_PATH=/api/monitoring/ready
LIVENESS_CHECK_PATH=/api/monitoring/live
